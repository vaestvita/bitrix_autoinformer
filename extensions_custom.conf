[autodialer]
exten => _.,1,Answer()
same => n,Wait(2)
same => n,Playback(custom/hello-autodialer)
same => n,SayUnixTime(${say_time},,AdB 'digits/at' kM)
same => n,Goto(ivr-2,s,1) ;перевод звонка в IVR 
same => n,Hangup()

[deal_action]
exten => confirm,1,NoOp()
same => n,Set(action=${SHELL(curl --header "Content-Type: application/json" --request POST --data '{"ID": ${DEALID}, "fields": {"STAGE_ID": 1 }}' ${APIURL}crm.deal.update.json)})
same => n,Return()

exten => decline,1,NoOp()
same => n,Set(new_time=${STRFTIME(${EPOCH},,%Y-%m-%d)})
same => n,Set(description=Нужно%20связаться%20с%20клиентом%20так%20как%20он%20хочет%20отмениь%20запись)
same => n,Set(action=${SHELL(curl --request GET ${APIURL}crm.activity.todo.add\?ownerTypeId=2\&ownerId=${DEALID}\&deadline=${new_time}\&description=${description}}))
same => n,Return()